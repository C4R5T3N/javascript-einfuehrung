<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>JavaScript: Serverkommunikation und dynamische Webanwendungen (Ajax)</title>
<link rel="stylesheet" href="js-doku.css">
<script type="text/javascript" src="js-doku.js"></script>
</head>
<body>

<div id="nav">
<p>Hier entsteht eine <strong>JavaScript-Dokumentation</strong> von <a href="http://molily.de/">molily</a>. Derzeit ist sie noch lückenhaft, wächst aber nach und nach. Kommentare und Feedback werden gerne per <a href="mailto:zapperlott@gmail.com">E-Mail</a> entgegen genommen.</p>
<p class="contents-link"><a href="./">Zum Inhaltsverzeichnis</a></p>
</div>

<h1>JavaScript: Serverkommunikation und dynamische Webanwendungen (Ajax)</h1>

<div class="section" id="webanwendungen">
	<h2>Entstehung von Ajax: Neue dynamische Webanwendungen</h2>
	<p>In der Anfangszeit bestand das World Wide Web aus einer Sammlung von weltweit abrufbaren wissenschaftlichen Daten und Dokumenten. Das heutige Web hingegen bietet nicht bloß statische Informationsangebote, sondern maßgeblich interaktive Dienste. Spätestens unter dem Schlagwort <em>Web 2.0</em> sind unzählige sogenannte <em>Webanwendungen</em> aus dem Boden gesprossen, die vorher ungeahnte Dienste ins Web brachten. Man denke nur an Kontaktnetzwerke, die selbst keine Inhalte bereitstellen, sondern ihren Nutzern Kommunikation und das Einstellen eigener Inhalte ermöglichen. Das Web als Verbund von mehreren Rechnern, nicht mehr der einzelne Rechner ist die Plattform für Software dieser Art.</p>
	<p>Viele dieser neuen Webanwendungen setzen stark auf JavaScript, um die Funktionalität klassischer Desktop-Anwendungen bereitzustellen &ndash; mit den Besonderheiten, die sich daraus ergeben, dass die Anwendung nun im Netz beheimatet ist. Heraus kommen zum Beispiel E-Mail-Programme, News-Leseprogramme, Textverarbeitung, Tabellenkalkulation, Präsentationen, Chat-Programme, Foto-Verwaltung und Bildbearbeitung, Terminkalender und Adressbücher, Karten-Anwendungen und vieles mehr. Mittlerweile genießen diese eine ungeheure Popularität und vereinfachen die Arbeit am Computer und im Netz.</p>
	<p>JavaScript spielt dabei eine zentrale und neue Rolle. Es handelt sich nicht um klassische HTML-Dokumente, denen mit JavaScript ein wenig Interaktivität hinzugefügt wird. Stattdessen funktionieren viele dieser neuartigen Webanwendungen ohne JavaScript nicht. Durch komplexes Event-Handling und viele Tricks bringt JavaScript einfache HTML-Elemente dazu, sich wie Bedienelemente von Desktop-Programmen zu verhalten - z.B. wie Schaltflächen, Menüs oder Dialogfenster.</p>
</div>

<div id="ajax-definition" class="section">
	<h2>Was ist anders an Ajax?</h2>
	<p>Gemeinsam ist den besagten Webanwendungen eine Schlüsseltechnik namens <strong>Ajax</strong>. Das bedeutet: <strong>JavaScript tauscht im Hintergrund Daten mit dem Webserver aus</strong> über selbst erzeugte HTTP-Anfragen, deren Server-Antwort dem Script zur Verfügung steht.</p>
	<p>Was ist daran nun neu? Dazu muss man zuerst verstehen, wie Interaktion im Web <em>ohne Ajax</em> funktioniert: Herkömmliche Webseiten nutzen Links und Formulare, um mit dem Webserver zu interagieren. Der Anwender aktiviert einen Link oder sendet ein Formular ab, woraufhin der Browser eine entsprechende HTTP-Anfrage an den Webserver stellt. Der Webserver antwortet, indem er üblicherweise ein HTML-Dokument zurückliefert, das der Browser verarbeitet und anzeigt. Ohne Ajax muss also immer ein neues, vollständiges HTML-Dokument vom Server geladen werden. Diese HTML-Dokumente werden oft von serverseitigen Programmen generiert.</p>
	<p>Ajax durchbricht dieses Prinzip und kann damit die Bedienung von Webseiten und den Aufbau von Webanwendungen grundlegend ändern. Es werden nicht immer neue HTML-Dokumente heruntergeladen und ausgewechselt, sondern nur kleine Datenportionen mit dem Webserver ausgetauscht. Gerade benötigte Daten werden nachgeladen und ausgewählte Änderungen dem Server mitgeteilt. Im Extremfall kommt eine sogenannte <em>Single Page Application</em> heraus, bei der es nur ein ursprüngliches HTML-Dokument gibt und der restliche Datenaustausch mit dem Webserver per JavaScript im Hintergrund abläuft. Über die DOM-Schnittstelle wird das Dokument nach Belieben umgestaltet. Es reagiert auf Benutzereingaben, übersendet diese gegebenenfalls an den Server, lädt im Hintergrund Inhalte vom Server nach und montiert diese ins bestehende Dokument ein.</p>
</div>

<div id="begriff" class="section">
	<h2>Der Begriff »Ajax«</h2>
	<p>Der Begriff <em>Ajax</em> wurde ursprünglich im Jahr 2005 von dem richtungsweisenden Artikel <a href="http://www.adaptivepath.com/ideas/essays/archives/000385.php"
	class="anchor-external">A New Approach to Web Applications</a> von Jesse James Garrett geprägt. Ajax steht darin als Abkürzung für <em>Asynchronous JavaScript and XML</em>.</p>
	<p>Diese Abkürzung stift leider mehr Verwirrung, als sie zum Verständnis beiträgt. Weder sind Ajax-Anwendungen »asynchron« in dem Sinne, dass die Kommunikation mit dem Server völlig losgelöst von Benutzereingaben stattfindet. Noch ist XML notwendigerweise das geeignete Übertragungsformat für Daten zwischen Client und Server. Garretts Konzept taugt wenig zum Verständnis der gegenwärtigen Praxis, die unter dem Schlagwort Ajax zusammengefasst wird.</p>
	<p>In den meisten Fällen bezeichnet »Ajax« lediglich den JavaScript-gestützte Datenaustausch mit dem Webserver. XML in dabei nur ein mögliches, aber nicht das zentrale Übertragungsformat. Und »Asynchronität« bedeutet lediglich, dass die JavaScript-Ausführung beim Warten auf die Serverantwort nicht den Browser blockiert, sondern dass JavaScript-Ereignisse gefeuert werden, wenn die Serverantwort eingetroffen ist.</p>
</div>

<div id="vorteile-nachteile" class="section">
	<h2>Vor- und Nachteile von Ajax</h2>
	<p>Im <strong>herkömmlichen Modell</strong> klickt der Anwender auf einen Link oder den Absende-Button eines Formulars und muss erst einmal warten: Der Browser übermittelt eine Anfrage an den Webserver. Dieser speichert gegebenenfalls Änderungen ab und generiert ein neues vollständiges Dokument. Erst wenn dieses zum Client-Rechner übertragen wurde und der Browser es vollständig dargestellt hat, kann der Anwender in der Webanwendung weiterarbeiten.</p>
	<p>Der Browser zeigt also beim klassischen Modell eine Reihe von eigenständigen HTML-Dokumenten (Ressourcen) an, die alle eine eindeutige Adresse (URI) besitzen. Dafür stellt der Browser Navigationsmechanismen wie den Verlauf (History) zur Verfügung. Diese Dokumente sind unabhängig von JavaScript lesbar, verlinkbar, durch Suchmaschinen indizierbar, abspeicherbar und so weiter.</p>
	<p>Mit <strong>Ajax</strong> hingegen werden die Serveranfragen im Hintergrund gestartet, ohne dass das Dokument ausgewechselt wird. Damit fällt das Warten auf die Serverantwort entweder ganz weg, weil nicht auf sie gewartet werden muss, oder der Server muss nur eine kleine Datenportion zurückschicken. Der Vorteil von Ajax-Webanwendungen ist daher, dass sie schneller auf Benutzereingaben reagieren und dem vertrauten Verhalten von Desktop-Anwendungen näherkommen.</p>
	<p>Ajax bricht absichtlich mit grundlegenden Funktionsweisen und Regeln des Webs. Daraus zieht es seine Vorteile, aber auch schwerwiegende Nachteile: Es gibt keine vollständigen, adressierbaren Dokumente mehr, die einen bestimmten Punkt und Status der Webanwendung markieren. Wenn der Anwender zu dem Inhalt kommen möchte, den er zuvor gesehen hat, betätigt er die Zurück-Funktion. Das funktioniert bei der Verwendung von Ajax nicht mehr wie gewohnt: Denn im Browser-Verlauf wird die Änderung der Inhalte via JavaScript nicht registriert, denn das Dokument ist nicht ausgewechselt worden und die Adresse hat sich nicht geändert. Eine Navigation, wie sie der Anwender von statischen Webseiten gewohnt ist, ist auf Seiten mit solcher JavaScript-Interaktivität nicht ohne weiteres möglich.</p>
	<p>Ajax-Anwendungen verlagern einen großen Teil der Datenverarbeitung vom Server-Rechner auf den Client-Rechner, genauer gesagt in den Browser. Damit steigen die Ansprüche, die an die Zugangssoftware gestellt werden. ...</p>
</div>

<div id="anwendung" class="section">
	<h2>Typische Anwendungsfälle</h2>
	<p>...</p>
	<ul>
		<li>Laden von kleinen Inhaltsfragmenten auf Benutzereingabe (z.B. Liste mit Ajax-Vollansichten)</li>
		<li>Auto-Vervollständigung (Autocomplete)</li>
		<li>Bewertungen und andere Server-Aktionen, die nicht das Laden eines neues Dokuments erfordern</li>
		<li>Pagination (Blättern/Seitennavigation)</li>
		<li>Edit-in-place-Formulare</li>
	</ul>
</div>

<div id="xmlhttprequest" class="section">
	<h2>XMLHttpRequest und andere Techniken zur Serverkommunikation</h2>
	<p>Hintergrund-Serverkommunikation wird in erster Linie mit einer JavaScript-Technik umgesetzt: dem <code>XMLHttpRequest</code>-Objekt. Dies ist ursprünglich eine proprietäre Erfindung von Microsoft für den Internet Explorer. Mithilfe von ActiveX ist es im Internet Explorer möglich, ein <code>XMLHttpRequest</code>-Objekt zu erzeugen. Darüber werden HTTP-Anfragen gestartet und die Serverantwort ausgelesen.</p>
	<p>Andere Browserhersteller erkannten die Möglichkeiten von <code>XMLHttpRequest</code> und übernahmen diese Technik - allerdings ohne ActiveX. Mittlerweile kennen alle großen JavaScript-fähigen Browser das Objekt <code>window.XMLHttpRequest</code>. Ab Version 7 des Internet Explorers ist dieses globale Objekt ebenfalls verfügbar, bei älteren Versionen muss der Umweg über ActiveX genommen werden.</p>
	<p>Der Clou an <code>XMLHttpRequest</code> ist, dass es eine Server-Anfrage standardmäßig <em>asynchron</em> absendet und die Server-Antwort durch Ereignis-Behandlung verarbeitet wird. Das bedeutet, dass ein Script die Anfrage auslöst und eine angegebene Handler-Funktion aufgerufen wird, sobald sich der Status der Anfrage ändert und schließlich die Antwort eintrifft. Das hat folgenden Sinn: Der Browser friert an der Stelle, wo die Anfrage abgesendet wird, nicht ein und stoppt das JavaScript, bis die Antwort eingetroffen ist, sondern kommt zur Ruhe, kann andere Scriptteile ausführen und sogar weitere Serveranfragen starten. Erst dadurch ist die schnelle und unterbrechungsfreie Reaktion auf Benutzereingaben möglich, die für Ajax-Anwendungen typisch ist.</p>
	<p>Neben <code>XMLHttpRequest</code> gibt es weitere JavaScript-Techniken, um im Hintergrund Daten mit dem Webserver auszutauschen. Strenggenommen wurde Ajax schon lange praktiziert, bevor sich <code>XMLHttpRequest</code> breiter Browserunterstützung erfreute. Aber erst mit <code>XMLHttpRequest</code> gelang Ajax der Durchbruch, weshalb beide Begriffe oft synonym verwendet werden. Dies allerdings zu Unrecht: Zwar ist <code>XMLHttpRequest</code> die vielseitigste, aber beileibe nicht immer die einfachste und geeignetste Methode, um Informationen mit dem Webserver auszutauschen. Alternativen sind unter anderem:</p>
	<ul class="content-list circle">
	<li>Versteckte eingebettete Frames (<em>Inner Frames</em>, <em>IFrames</em>), in denen Daten geladen werden oder die als Ziel-Frame für Formulare dienen. Ein Script kann auf diesen Frame und seine Inhalte zugreifen.</li>
	<li>Per JavaScript erzeugte Bildobjekte (<code>Image</code>-Objekte), mit denen sich Serveranfragen starten lassen - unabhängig davon, ob der Server eine Bilddatei zurücksendet.</li>
	<li>Per JavaScript erzeugte <code>script</code>-Elemente, die Scripte selbst von fremden Servern einbinden können, die Daten in mit JavaScript direkt zugänglichen Formaten bereitstellen.</li>
	</ul>
	<p>...</p>
</div>
<div id="beispiel" class="section">
	<h2>Beispiel für XMLHttpRequest</h2>
	<p>...</p>
</div>

<div id="formate-xml-json" class="section">
<h2>Übertragungsformate</h2>
	<div class="subsection">
		<h3>XML</h3>
		<p><code>XMLHttpRequest</code> hat seinen Namen daher, dass es ursprünglich dazu gedacht war, XML-Dokumente vom Server herunterzuladen. JavaScript kann anschließend mit verschiedenen Schnittstellen mit dem Dokument arbeiten. Das funktioniert zwar vorzüglich, allerdings ist das Extrahieren von Daten aus einem XML-Dokument über die DOM-Schnittstelle umständlich.</p>
		<p>Wenn Sie strukturierte Daten per XML übertragen wollen, müssen Sie ein eigenes XML-Derivat, d.h. eine Auszeichnungssprache nach den Regeln von XML entwerfen. Sie definieren gewisse Elemente und Attribute und die grammatischen Regeln, wie diese zusammengesetzt werden können. So entstehen Datenstrukturen, die die zu übertragenden Informationen in der notwendigen Ordnung beinhalten. Das zugehörige JavaScript kann diese Elemente ansprechen und die Werte der enthaltenen Textknoten bzw. Attribute auslesen.</p>
		<p>Auch wenn Sie die Grammatik-Regeln der XML-Sprache nicht unbedingt in einer formalen Dokumentyp-Definition (DTD) niederschreiben müssen, ist das Entwerfen eines neuen XML-Derivates bloß für Ajax vergleichsweise aufwändig. Das Auslesen der Informationen im JavaScript erfordert nicht nur Kenntnisse des XML-DOM, sondern ist mit ziemlicher Schreibarbeit verbunden.</p>
		<p>Wenn die serverseitigen Programme, die Ihre Website betreiben, bereits ein XML-Format als Speicher- oder Austauschformat verwendet und die damit ausgezeichneten Daten zum Client weitergeschickt werden sollen, bietet es sich auch für Ajax an. Andernfalls ist XML oftmals kompliziert und überdimensioniert.</p>
		<p>...</p>
		<pre class="content-example">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;us-präsidenten&gt;
&lt;präsident&gt;
&lt;name&gt;Harry S. Truman&lt;/name&gt;
&lt;partei&gt;Demokraten&lt;/partei&gt;
&lt;beginn&gt;1945&lt;/beginn&gt;
&lt;ende&gt;1953&lt;/ende&gt;
&lt;/präsident&gt;
&lt;präsident&gt;
&lt;name&gt;Dwight D. Eisenhower&lt;/name&gt;
&lt;partei&gt;Republikaner&lt;/partei&gt;
&lt;beginn&gt;1953&lt;/beginn&gt;
&lt;ende&gt;1961&lt;/ende&gt;
&lt;/präsident&gt;
&lt;präsident&gt;
&lt;name&gt;John F. Kennedy&lt;/name&gt;
&lt;partei&gt;Demokraten&lt;/partei&gt;
&lt;beginn&gt;1961&lt;/beginn&gt;
&lt;ende&gt;1963&lt;/ende&gt;
&lt;/präsident&gt;
&lt;/us-präsidenten&gt;</pre>
	

	<div class="subsection">
		<h3>JSON</h3>
		<p>...</p>
		<pre class="content-example">[
{
"name" : "Harry S. Truman",
"partei" : "Demokraten",
"beginn" : 1945,
"ende" : 1953
},
{
"name" : "Dwight D. Eisenhower"
"partei" : "Republikaner",
"beginn" : 1953,
"ende" : 1961
},
{
"name" : "John F. Kennedy"
"partei" : "Demokraten",
"beginn" : 1961,
"ende" : 1963
}
]</pre>
		<p>...</p>
	</div>
	
	<div class="subsection">
		<h3>HTML</h3>
		<p>...</p>
	</div>

	<div class="section">
		<h3>Nur-Text</h3>
		<p>...</p>
	</div>
</div>

<div id="sicherheit" class="section">
	<h2>Ajax und Sicherheit</h2>
	<p>...</p>
</div>

<div id="footer">
<p><strong>JavaScript-Dokumentation</strong> &middot; <a href="http://molily.de/js/">Zum Inhaltsverzeichnis</a></p>
<p>Autor: <a href="http://molily.de/">molily</a> &middot; Kontakt: <a href="mailto:zapperlott@gmail.com">zapperlott@gmail.com</a></p>
<p>Lizenz: <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/de/">Creative Commons Namensnennung - Weitergabe unter gleichen Bedingungen</a>.</p>
</div>

</body>
</html>